!function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):t.Dialog=e()}(this,function(t){"function"==typeof t&&t("loading");var l="coo-",r="coo-dialog-",c=window.addEventListener?'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200"><path d="M116.152,99.999l36.482-36.486c2.881-2.881,2.881-7.54,0-10.42 l-5.215-5.215c-2.871-2.881-7.539-2.881-10.42,0l-36.484,36.484L64.031,47.877c-2.881-2.881-7.549-2.881-10.43,0l-5.205,5.215 c-2.881,2.881-2.881,7.54,0,10.42l36.482,36.486l-36.482,36.482c-2.881,2.881-2.881,7.549,0,10.43l5.205,5.215 c2.881,2.871,7.549,2.871,10.43,0l36.484-36.488L137,152.126c2.881,2.871,7.549,2.871,10.42,0l5.215-5.215 c2.881-2.881,2.881-7.549,0-10.43L116.152,99.999z"/></svg>':"",d="WebkitAppearance"in document.documentElement.style||void 0!==document.webkitHidden;$.dialog=function(t){return new e(t)};var e=function(t){var e={title:"",content:"",width:"auto",buttons:[],onShow:$.noop,onHide:$.noop,onRemove:$.noop},n=$.extend({},e,t||{}),i={};this.el=i,this.width=n.width,this.callback={show:n.onShow,hide:n.onHide,remove:n.onRemove},i.container=window.addEventListener?$('<dialog class="'+r+'container"></dialog>'):$('<div class="'+r+'container"></div>'),history.pushState&&i.container.get(0).addEventListener(d?"webkitAnimationEnd":"animationend",function(t){"dialog"==t.target.tagName.toLowerCase()&&this.classList.remove(r+"animation")}),i.dialog=$('<div class="coo-dialog"></div>').css("width",n.width).attr({tabindex:"-1",role:"dialog"}),i.title=$('<div class="'+r+'title" role="heading"></div>').html(n.title);var o=("id_"+Math.random()).replace("0.","");i.close=$('<a href="javascript:" class="'+r+'close ESC"></a>').attr({role:"button","aria-label":"关闭",id:o,"data-target":o}).html(c).click($.proxy(function(t){t.preventDefault();var e=document.activeElement,n=e.getAttribute("data-target"),o=n&&document.getElementById(n);window.isKeyEvent&&o&&e!=i.close[0]&&document.querySelector('a[data-target="'+n+'"],input[data-target="'+n+'"]')&&0<o.clientWidth||this[this.closeMode]()},this));var a=n.content;$.isFunction(a)&&(a=a()),a.size?this.closeMode="hide":this.closeMode="remove",i.body=$('<div class="'+r+'body"></div>')[a.size?"append":"html"](a),i.footer=$('<div class="'+r+'footer"></div>'),this.button(n.buttons),i.container.append(i.dialog.append(i.close).append(i.title).append(i.body).append(i.footer)),document.querySelector||i.container.append('<i class="'+r+'after"></i>');var s=$("."+r+"container");return s.length?s.eq(0).before(i.container.css({zIndex:1*s.eq(0).css("z-index")+1})):(n.container||$(document.body)).append(i.container),this.display=!1,n.content&&this.show(),this};return e.prototype.button=function(t){var s=this.el,r=this;return s.footer.empty(),$.each(t,function(n,t){t=t||{};var e=n?t.type||"":t.type||"primary",o=n?t.value||"取消":t.value||"确定",i=t.events||{click:function(){r[r.closeMode]()}};$.isFunction(i)&&(i={click:i});var a=l+"button";e&&(a=a+" "+a+"-"+e),t.for?s["button"+n]=$('<label for="'+t.for+'" class="'+a+'" role="button">'+o+"</label>"):s["button"+n]=$('<a href="javascript:" class="'+a+'" role="button">'+o+"</a>"),$.each(i,function(t,e){s["button"+n].bind(t,{dialog:r},e),s["button"+n].on("focus",function(){$(this).css("outline",window.isKeyEvent?"":"none")})}),s.footer.append(s["button"+n])}),r},e.prototype.loading=function(){if(!$().loading)return window.console&&window.console.error("need Loading.js"),e;var t=this.el,e=this;return t&&(t.container.attr("class",[r+"container",r+"loading"].join(" ")),t.body.loading(),e.show()),e},e.prototype.unloading=function(t){if(!$().unloading)return window.console&&window.console.error("need Loading.js"),n;var e=this.el,n=this;return e&&(e.container.removeClass(r+"loading"),e.body.unloading(t)),n},e.prototype.open=function(t,e){var n=this.el,o=$.extend({},{title:"",buttons:[]},e||{});return n&&t&&(n.container.attr("class",[r+"container"].join(" ")),n.title.html(o.title),n.body.html(t),this.button(o.buttons).show()),this},e.prototype.alert=function(t,e){var n=this.el,o=$.extend({},{title:"",type:"remind",buttons:[{}]},e||{});return o.buttons[0].type||"remind"==o.type||(o.buttons[0].type=o.type),n&&t&&(n.container.attr("class",[r+"container",r+"alert"].join(" ")),n.dialog.width("auto").attr({role:"alertdialog"}),n.title.html(o.title),0==/<[\w\W]+>/.test(t)&&(t="<p>"+t+"</p>"),n.body.html('<div class="'+r+o.type+" "+r+'alert">'+t+"</div>"),this.button(o.buttons).show(),n.button0&&n.button0.focus()),this},e.prototype.confirm=function(t,e){var n=this.el,o=$.extend({},{title:"",type:"warning",buttons:[{type:"warning"},{}]},e||{});return o.buttons.length&&!o.buttons[0].type&&(o.buttons[0].type="warning"),n&&t&&(n.container.attr("class",[r+"container",r+"confirm"].join(" ")),n.dialog.width("auto"),n.title.html(o.title),0==/<[\w\W]+>/.test(t)&&(t="<p>"+t+"</p>"),n.body.html('<div class="'+r+o.type+" "+r+'confirm">'+t+"</div>"),this.button(o.buttons).show(),n.button0&&n.button0.focus()),this},e.prototype.ajax=function(t,e){var o=this,n={dataType:"JSON",timeout:3e4,error:function(t,e){var n="";n="timeout"==e?"<p>主要是由于请求时间过长，数据没能成功加载，这一般是由于网速过慢导致，您可以稍后重试！</p>":"parsererror"==e?"<p>原因是请求的数据含有不规范的内容。一般出现这样的问题是开发人员没有考虑周全，欢迎向我们反馈此问题！</p>":"<p>一般是网络出现了异常，如断网；或是网络临时阻塞，您可以稍后重试！如依然反复出现此问题，欢迎向我们反馈！</p>",o.alert("<h6>尊敬的用户，很抱歉您刚才的操作没有成功！</h6>"+n,{type:"warning"}).unloading()}},i=$.extend({},n,t||{});if(!i.url)return this;var a=$.extend({},{title:"",content:function(t){return"string"==typeof t?t:"看见我说明没使用'options.content'做JSON解析"},buttons:[]},e||{}),s=(new Date).getTime(),r=i.success;return i.success=function(t){o.open(a.content(t),a),(new Date).getTime()-s<100?o.unloading(0):o.unloading(),$.isFunction(r)&&r.apply(this,arguments)},o.loading(),$.ajax(i),o},e.prototype.scroll=function(){var t=$("."+r+"container"),e=!1;if(t.each(function(){"block"==$(this).css("display")&&(e=!0)}),e){var n=17;1!=this.display&&"number"==typeof window.innerWidth&&(n=window.innerWidth-document.documentElement.clientWidth),document.documentElement.style.overflow="hidden",1!=this.display&&$(document.body).css("border-right",n+"px solid transparent")}else document.documentElement.style.overflow="",$(document.body).css("border-right","");return this},e.prototype.tabindex=function(){var t=this.el.dialog,e=this.lastActiveElement;if(1==this.display){var n=document.activeElement;t[0]!==n&&(this.lastActiveElement=n),t&&t.focus()}else e&&"body"!=e.tagName.toLowerCase()&&(e.focus(),e.blur(),this.lastActiveElement=null);return t},e.prototype.show=function(){var t=this.el&&this.el.container;return t&&(t.css("display","block"),1!=this.display&&t.addClass(r+"animation"),this.scroll(),this.display=!0,this.tabindex(),$.isFunction(this.callback.show)&&this.callback.show.call(this,t)),this},e.prototype.hide=function(){var t=this.el.container;return t&&(t.hide(),this.scroll(),this.display=!1,this.tabindex(),$.isFunction(this.callback.hide)&&this.callback.hide.call(this,t)),this},e.prototype.remove=function(){var t=this.el&&this.el.container;return t&&(t.remove(),this.scroll(),this.display=!1,this.tabindex(),$.isFunction(this.callback.remove)&&this.callback.remove.call(this,t)),this},e});