!function(e,t){"function"==typeof define&&(define.amd||define.cmd)?define(t):e.Drop=t()}(this,function(e){if("function"==typeof e)e("follow");else if(!$().follow)return window.console&&window.console.error("need follow.js"),{};$.fn.drop=function(e,t){return $(this).each(function(){$(this).data("drop")||$(this).data("drop",new i($(this),e,t))})};var i=function(e,t,i){var o={eventType:"null",selector:"",offsets:{x:0,y:0},edgeAdjust:!0,position:"7-5",onShow:$.noop,onHide:$.noop},s=$.extend({},o,i||{}),a=t.attr("id");a||(a=("id_"+Math.random()).replace("0.",""),t.attr("id",a)),""==s.selector&&e.attr({"data-target":a,"aria-expanded":"false"}),this.el={trigger:e,target:t},this.offsets=s.offsets,this.callback={show:s.onShow,hide:s.onHide},this.position=s.position,this.edgeAdjust=s.edgeAdjust,this.display=!1;var n=this;switch(s.eventType){case"null":this.show();break;case"hover":var r,l;e.delegate(s.selector,"mouseenter",function(){s.selector&&(n.el.trigger=$(this).attr({"data-target":a,"aria-expanded":"false"})),r=setTimeout(function(){n.show()},150),clearTimeout(l)}),e.delegate(s.selector,"mouseleave",function(){clearTimeout(r),l=setTimeout(function(){n.hide()},200)}),t.data("dropHover")||(t.hover(function(){clearTimeout(l)},function(){l=setTimeout(function(){n.hide()},100)}),t.data("dropHover",!0)),e.delegate(s.selector,"click",function(e){window.isKeyEvent&&(s.selector&&(n.el.trigger=$(this).attr({"data-target":a,"aria-expanded":"false"})),0==n.display?n.show():n.hide(),e.preventDefault())});break;case"click":case"contextmenu":e.delegate(s.selector,s.eventType,function(e){if(e.preventDefault(),s.selector&&(n.el.trigger=$(this).attr({"data-target":a,"aria-expanded":"false"})),"contextmenu"==s.eventType)return n.position=[e.pageX,e.pageY],void n.show();0==n.display?n.show():n.hide()})}return $(document).click(function(e){var t=e&&e.target;if(t&&n&&1==n.display){var i=n.el.trigger.get(0),o=n.el.target.get(0);i&&o&&t!=i&&t!=o&&0==i.contains(t)&&0==o.contains(t)&&n.hide()}}),$(window).resize(function(){n.follow()}),n};return i.prototype.follow=function(){var e=this.el.target,t=this.el.trigger;return 1==this.display&&"none"!=t.css("display")&&e.follow(t,{offsets:this.offsets,position:this.position,edgeAdjust:this.edgeAdjust}),this},i.prototype.show=function(){var e=this.el.target,t=this.el.trigger;return e&&0==$.contains(document.body,e.get(0))&&$("body").append(e),this.display=!0,e.css({position:"absolute",display:"inline"}).addClass("ESC"),t.attr({"aria-expanded":"true"}),this.follow(),$.isFunction(this.callback.show)&&this.callback.show.call(this,t,e),this},i.prototype.hide=function(){var e=this.el.target,t=this.el.trigger;return e.hide().removeClass("ESC"),t.attr({"aria-expanded":"false"}),window.isKeyEvent&&t.focus(),this.display=!1,$.isFunction(this.callback.hide)&&this.callback.hide.call(this,t,e),this},i});