!function(e,t){"function"==typeof define&&(define.amd||define.cmd)?define(t):t()}(0,function(){var f=document,y=window;if("object"==typeof y.Keyboard)return y.Keyboard;var e=navigator.userAgent,t="windows";/Mac\sOS\sX/i.test(e)&&(t="mac");var l="chrome";void 0!==f.mozFullScreen?l="moz":void 0===f.msHidden&&void 0!==f.hidden||(l="ie");function s(e){if(!f.hasTipsShow){var o=f.documentElement.scrollTop||f.body.scrollTop,c=f.documentElement.scrollLeft||f.body.scrollLeft;e.forEach(function(e){if(e.clientHeight*e.clientWidth!=0){var t=e.getAttribute("accesskey"),n=[];for(var r in u)u[r]&&n.push(r);n.push(t);var i=e.getBoundingClientRect(),a=f.createElement("div");a.className="ui-kbd-tips AK_Tips",a.setAttribute("style","top:"+(i.top+o)+"px;left:"+(i.left+c)+"px;"),a.innerHTML=n.map(function(e){return"<kbd>"+e.replace("Key","")+"</kbd>"}).join("+"),f.body.appendChild(a),a.fromTarget=e}}),f.hasTipsShow=!0,n=setTimeout(function(){d()},3e3)}}var u={windows:"moz"==l?{ctrlKey:!1,altKey:!0,shiftKey:!0}:{ctrlKey:!1,altKey:!0,shiftKey:!1},mac:{ctrlKey:!0,altKey:!0,shiftKey:!1}}[t],n=null,d=function(){clearTimeout(n);var e=f.querySelectorAll(".AK_Tips");[].slice.call(e).forEach(function(e){e.fromTarget&&(e.fromTarget.hasTipsShow=null),f.body.removeChild(e)}),f.hasTipsShow=null};if(f.addEventListener&&(f.addEventListener("keydown",function(n){var e=!1,t=n.target||f.activeElement,r=t.tagName.toLowerCase();("textarea"==r||"input"==r&&0==/checkbox|radio|select|file|button|image|hidden/i.test(t.type))&&(e=!0);var i=f.querySelectorAll("a[accesskey],area[accesskey],button[accesskey],input[accesskey],label[accesskey],legend[accesskey],textarea[accesskey]");if(0!=i.length){var a=[].slice.call(i),o=a.map(function(e){return e.getAttribute("accesskey")}),c=-1;if(o.forEach(function(e,t){if(n.key&&n.key==e||n.keyIdentifier&&parseInt(n.keyIdentifier.toLowerCase().replace("u+",""),16)==parseInt(function(e,t){if(!e)return"";t=t||"x";for(var n,r="",i=0;i<e.length;i+=1)55296<=e.charCodeAt(i)&&e.charCodeAt(i)<=56319?(n=(65536+1024*(Number(e.charCodeAt(i))-55296)+Number(e.charCodeAt(i+1))-56320).toString(16),i+=1):n=e.charCodeAt(i).toString(16),r+=t+n;return r.substr(t.length)}(e),16))return c=t,!1}),0==n.altKey&&0==n.shiftKey&&0==n.ctrlKey){if(e)return;a[c]&&(a[c].focus(),n.preventDefault())}else 0==n.altKey&&1==n.shiftKey&&0==n.ctrlKey?191!=n.keyCode||e||(f.hasTipsShow?d():s(a)):n.altKey==u.altKey&&n.shiftKey==u.shiftKey&&n.ctrlKey==u.ctrlKey&&(-1==c?(n.preventDefault(),f.hasTipsShow?d():s(a)):d(),"ie"==l&&a[c]&&!e&&a[c].click())}}),f.addEventListener("mousedown",function(){d()})),f.addEventListener){var v={37:"left",38:"up",39:"right",40:"down",13:"enter",9:"tab",27:"esc"},h="ui-outline",m={add:function(e){e.className=e.className+" "+h},remove:function(e){e.className=e.className.split(/\s+/).filter(function(e){if(e!=h)return e}).join(" ")},removeAll:function(){[].slice.call(f.querySelectorAll("."+h)).forEach(function(e){m.remove(e)})},has:function(e){return!(!e.className||!e.className.split)&&0<e.className.split(/\s+/).filter(function(e){if(e==h)return e}).length}};y.isKeyEvent=!1,f.addEventListener("keydown",function(e){y.isKeyEvent=!0,setTimeout(function(){y.isKeyEvent=!1},100);var t=v[e.keyCode];if(t){var n=f.activeElement;if(n&&!/body/i.test(n.tagName)){if(/^radio|checkbox$/i.test(n.type)&&"enter"==t)return n.click(),void e.preventDefault();var r=null,i=f.querySelectorAll(".ESC");"esc"==t&&i.length&&[].slice.call(i).forEach(function(e){var t=e.id;(r=t&&f.querySelector('a[data-target="'+t+'"],input[data-target="'+t+'"]'))&&"none"!==e.style.display&&0<e.clientHeight&&r.click()});var a=n.getAttribute("data-focus"),o=n.getAttribute("data-target"),c=null;if((a||o)&&(a?c=f.getElementById(a):o&&(c=f.getElementById(o)),c&&(0!=c.clientWidth||0!=c.clientHeight)))if("tab"!=t){if("enter"==t){var l=c.querySelector("."+h);if(l&&a)return e.preventDefault(),void l.click();if(o)return}if("esc"==t)return r=f.querySelector('a[data-target="'+o+'"],input[data-target="'+o+'"]'),void(a?n.blur():r&&0==/ESC/.test(r.className)&&r.click());var s=[].slice.call(c.querySelectorAll("a[href], button:not(:disabled), input:not(:disabled)")),u=-1;0!=s.length&&(s.forEach(function(e,t){a?m.has(e)&&(u=t):n==e&&(u=t),m.remove(e)}),e.preventDefault(),"left"==t||"up"==t?--u<0&&(u=-1):"right"!=t&&"down"!=t||++u>s.length-1&&(u=s.length),s[u]&&(a?m.add(s[u]):s[u].focus()))}else{m.removeAll();var d=c.querySelector("a[href], button:not(:disabled), input:not(:disabled)");d&&(d.focus(),e.preventDefault())}}}}),f.addEventListener("mousedown",function(e){var t=e.target;t&&!m.has(t)&&m.removeAll()}),f.addEventListener("click",function(e){var t=e.target,n=f.activeElement,r=t.getAttribute("tabindex")||"-1";t&&t==n&&(/^radio|checkbox$/i.test(n.type)||0<=r)&&0==y.isKeyEvent&&n.blur()}),f.addEventListener("focusin",function(e){var t=e.target;t&&(/^javascript/.test(t.href)&&!t.getAttribute("role")?t.setAttribute("role","button"):"button"!=t.type&&"submit"!=t.type||y.isKeyEvent&&m.add(t))}),f.addEventListener("focusout",function(e){var t=e.target;t&&("button"!=t.type&&"submit"!=t.type||m.remove(t))})}y.Keyboard={ua:e,browser:l,keycode:v,keyPrefix:u}});