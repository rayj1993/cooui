!function(i,t){"function"==typeof define&&(define.amd||define.cmd)?define(t):i.Loading=t()}(this,function(){var l="-",r="coo-loading",o=r+l+"icon",h="loading";$.fn.isLoading=function(){var i=$(this).eq(0);if(i.is("a,label,input,button"))return i.hasClass(h);var t=i.find("."+o);return!(!t.length||!t.is(":visible"))},$.fn.loading=function(t){return $(this).each(function(){var i=$(this);i.is("a,label,input,button")?i.addClass(h):i.data("loading",new n(i,t))})},$.fn.unloading=function(s){var o=s||0;return"number"!=typeof s&&(o=200),void 0===s&&(s=o),$(this).each(function(i,t){var n=$(this);if(n.is("a,label,input,button"))n.removeClass(h);else if("function"==typeof history.pushState)if(0<o){var e=n.height();n.css({height:"auto",webkitTransition:"none",transition:"none",overflow:"hidden"});var a=n.height();n.height(e),n.removeClass(r+l+"animation"),t.offsetWidth=t.offsetWidth,!1!==s&&n.addClass(r+l+"animation"),n.css({webkitTransition:"height "+o+"ms",transition:"height "+o+"ms"}),setTimeout(function(){n.css("overflow","")},o),n.height(a)}else n.height("auto");else n.height("auto")})};var n=function(i,t){var n=$.extend({},{primary:!1,small:!1,create:!1},t||{}),e=i,a=null,s=null;return this._create=function(){var i=this.el.container;a=i.find("."+r),s=i.find("."+o),!0===n.create&&0===a.length?(a=i.is("ul,ol")?$("<li></li>").addClass(r):$("<div></div>").addClass(r),i.append(a)):0==n.create&&(a=i),0==s.length&&(s=(n.small?$("<s></s>"):$("<i></i>")).addClass(o),a.empty().addClass(r).append(s),n.primary&&a.addClass(r+l+"primary")),s.attr({"aria-busy":"true","aria-label":"正在加载中"}),i.attr("data-position",i.css("position")),this.el.loading=a,this.el.icon=s},this.el={container:e,loading:a,icon:s},this.show(),this};return n.prototype.show=function(){var i=this.el;return i.loading&&i.icon||this._create(),i.loading.show(),this.display=!0,this},n.prototype.hide=function(){var i=this.el,t=i.container,n=i.loading;return n&&(t.get(0)!=n.get(0)?n.hide():t.find("."+o).length&&(n.empty(),this.el.icon=null)),this.display=!1,this},n.prototype.remove=function(){var i=this.el,t=i.container,n=i.loading,e=i.icon;return n&&e&&(t.get(0)==n.get(0)?(n.removeClass(r),e.remove()):n.remove(),this.el.loading=null,this.el.icon=null),this.display=!1,this},n.prototype.end=function(i){var t=this.el.container;return t&&(t.unloading(i),0==t.find("."+o).length&&(this.el.icon=null)),this.display=!1,this},n});