!function(t,i){"function"==typeof define&&(define.amd||define.cmd)?define(i):t.Tips=i()}(this,function(t){if("function"==typeof t)t("common/ui/Follow");else if(!$().follow)return window.console&&window.console.error("need Follow.js"),{};var d="coo-tips",c=d+"-",l="reverse";$.fn.tips=function(t){return $(this).each(function(){$(this).data("tips")||$(this).data("tips",new i($(this),t))})};var i=function(t,i){var e={attribute:"title",eventType:"hover",content:"",align:"center",delay:100,onShow:$.noop,onHide:$.noop};if("string"==typeof t&&(t=$(t)),!t||!t.length)return this;if(1<t.length)return t.tips(i),t.eq(0).data("tips");var n,a,s=$.extend({},e,i||{}),o=t;if(0==o.is("a,button,input")&&o.attr({tabindex:"0",role:"tooltip"}),o.hasClass(d)){var r=o.attr("title")||o.attr("data-title");return r&&o.attr({"data-title":r,"aria-label":r}).removeAttr("title"),window.addEventListener||(n=$('<span class="'+c+'before"></span>').html(r),a=$('<i class="'+c+'after"></i>'),o.prepend(n),o.append(a),n.css("margin-left",-.5*n.outerWidth()),a.css("margin-left",-.5*a.outerWidth())),o.on("click",function(){window.isKeyEvent||this.blur()}),void(o.data("tips")||o.data("tips",this))}var l,h=this;return this._content=function(){var t=s.content;return t||(t=o.attr(s.attribute),"title"==s.attribute&&((t=t||o.data("title"))&&o.attr({"aria-label":t}).data("title",t),o.removeAttr("title"))),t},this.el={trigger:o,tips:void 0},this.callback={show:s.onShow,hide:s.onHide},this.align=s.align,"hover"==s.eventType?(o.hover(function(){var t=h._content();l=setTimeout(function(){h.show(t)},s.delay)},function(){clearTimeout(l),h.hide()}),o.on({focus:function(){h.show(h._content())},blur:function(){h.hide()}})):"click"==s.eventType?(o.click(function(){h.show(h._content())}),$(document).mouseup(function(t){var i=t.target,e=o.get(0);1==h.display&&e!=i&&0==e.contains(i)&&0==h.el.tips.get(0).contains(i)&&h.hide()})):this.show(h._content()),this};return i.prototype.show=function(t){if(!(t=t||this.content))return this;var i,e,n=this.el.trigger,a=this.el.tips;if(this.content=t,a)a.show(),i=a.find("span").html(t),e=a.find("i");else{if(a=$("<div></div>").addClass(c+"x"),i=$('<span class="'+c+'before"></span>').html(t),e=$('<i class="'+c+'after"></i>'),!n.attr("aria-label")){var s="t_"+(Math.random()+"").replace("0.","");i.attr("id",s),n.attr("aria-labelledby",s)}$(document.body).append(a.append(i).append(e))}var o=0,r="5-7";return"left"==this.align?o=-.5*i.width()+parseInt(i.css("padding-left"))||0:"right"==this.align?o=.5*i.width()-parseInt(i.css("padding-right"))||0:"rotate"==this.align?r="6-8":"number"==typeof this.align?o=this.align:!n.hasClass(l)&&this.align!=l||(r="7-5",this.align=l),a.addClass(c+this.align),"rotate"!=this.align&&this.align!=l&&e.css({left:o}),a.follow(n,{offsets:{x:o,y:0},position:r,edgeAdjust:!1}),this.callback.show.call(n,a),this.el.tips=a,this.display=!0,this},i.prototype.hide=function(){return this.el.tips&&(this.el.tips.hide(),this.callback.hide.call(this.el.trigger,this.el.tips)),this.display=!1,this},i.prototype.init=function(n){return n=n||d,$("."+n).tips(),$(document).mouseover(function(t){var i=t&&t.target;if(i&&$(i).hasClass(n)&&!$(i).data("tips")){$(i).tips();var e=$(i).data("tips");e._content&&e.show(e._content())}}),this},i});