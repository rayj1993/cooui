!function(e,t){"function"==typeof define&&(define.amd||define.cmd)?define(t):t()}(0,function(){$.fn.tree=function(e){return new t($(this),e)};var t=function(e,t){var i=$.extend({},{url:"",data:[],childName:"children",open:!0,field:{},done:function(){}},t||{});this.params=i,this.$el=e,i.data&&this.create()};t.prototype.create=function(){var e=$('<div class="coo-tree-node"></div>');this.tree(e);var t=$('<div class="coo-tree"></div>').append(e);this.$el.html(t),this.params.done(this.params.data,t)},t.prototype.tree=function(s,e){function r(e,t){var i,n,o="";for(i in t)n=new RegExp("{{"+i+"}}","ig"),o=(o||e).replace(n,t[i]);return o}var l=this,a=l.params,t=e||a.data,d=a.field;$(t).each(function(e,t){var i,n=t.children&&0<=t.children.length,o=$('<div class="coo-tree-node" '+(a.open?"":'style = "display: none;"')+"></div>"),c=$(['<div class="coo-tree-set">','   <div class="coo-tree-item">',n?'<span class="coo-left-box"><i class="icon icon-tree-bottom '+(a.open?"":"icon-tree-right")+'"></i></span>':'<span class="coo-left-box"></span>',function(){if(d.right){if("string"==typeof d.right.templet||"function"==typeof d.right.templet){return"function"!=typeof d.right.templet?r('<span class="coo-right-box">'+d.right.templet+"</span>",t):'<span class="coo-right-box">'+d.right.templet(t)+"</span>"}else{var i={eye:'<i class="icon icon-tree-close"></i>'},n=['<span class="coo-right-box">'];$(d.right.edit).each(function(e,t){n.push(i[t])}),n.push("</span>")}return n.join("")}}(),(i="",i="function"==typeof d.middle.title?d.middle.title(t):r(d.middle.title,t),"function"!=typeof d.middle.templet?r('<span class="coo-middle-box" title="'+i+'">'+d.middle.templet+"</span>",t):'<span class="coo-middle-box" '+(i?"title="+i:"")+">"+d.middle.templet(t)+"</span>"),"</div></div>"].join(""));n&&(c.append(o),l.tree(o,t.children)),d.right&&l.setEditEyeEvent(c,t),s.append(c),l.events(c,t)})},t.prototype.events=function(e,t){var i=this.params.field;e.children().children(".coo-middle-box").on("click",function(){$(this).siblings(".coo-left-box").children(".icon-tree-bottom").toggleClass("icon-tree-right").parent().parent().next(".coo-tree-node").toggle(),i.left&&"function"==typeof i.left.click&&i.middle.click(t,$(this))}),e.children().children(".coo-left-box").on("click",function(){$(this).children(".icon-tree-bottom").toggleClass("icon-tree-right").parents(".coo-tree-item").next(".coo-tree-node").toggle(),i.left&&"function"==typeof i.left.click&&i.left.click(t,$(this))})},t.prototype.setEditEyeEvent=function(e,t){var i=this.params.field;e.children().children(".coo-right-box").on("click",".icon-tree-close",function(){$(this).toggleClass("icon-tree-open"),i.right.click&&i.right.click(t,$(this)),$(this).hasClass("icon-tree-open")?$(this).parents(".coo-tree-item").next().find(".icon-tree-close").each(function(){$(this).hasClass("icon-tree-open")||$(this).click()}):$(this).parents(".coo-tree-item").next().find(".icon-tree-close").each(function(){$(this).hasClass("icon-tree-open")&&$(this).click()}),$(this).parents(".coo-tree-node").prev().each(function(){$(this).next().find(".icon-tree-close").length===$(this).next().find(".icon-tree-open").length?$(this).children(".coo-right-box").children().addClass("icon-tree-open"):$(this).children(".coo-right-box").children().removeClass("icon-tree-open")})})},t.prototype.reload=function(){}});